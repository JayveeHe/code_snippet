# -*- coding: utf-8 -*-
__author__ = 'zhanghengyang'

a = {'location': '{"objectId":"563784c200b0387b2d4e09d0","user_id":"562881ae60b2260e76fc77cb","userRawdataId":"563784c060b21ee8e737436b","isTrainingSample":0,"city":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82","radius":65,"street":"\xe4\xb8\x87\xe6\xb3\x89\xe6\xb2\xb3\xe6\xa1\xa5","timestamp":1446478899819,"province":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82","processStatus":"untreated","street_number":"","district":"\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba","nation":"\xe4\xb8\xad\xe5\x9b\xbd","poiProbLv1":{"education":0.9255632238935763,"traffic":0.008742384145605485,"estate":0.06182145506760644,"entertainment":0.0038729368932134563},"poiProbLv2":{"primary_school":0.2959836702144664,"high_school":0.6295795536791098,"bus_route":0.008742384145605485,"residence":0.06182145506760644,"park":0.0038729368932134563},"pois":{"objectId":"563784c060b21ee8e737436b","timestamp":1446478899819,"pois":[{"title":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c10\xe5\x8f\xb7\xe9\x99\xa2","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba\xe8\x8a\x99\xe8\x93\x89\xe5\x8d\x97\xe8\xa1\x97\xe9\x99\x84\xe8\xbf\x91","location":{"__type":"GeoPoint","latitude":39.986019,"longitude":116.300949},"_distance":0,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"6023173168070458359","_dir_desc":"\xe5\x86\x85"},{"title":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba","location":{"__type":"GeoPoint","latitude":39.986019,"longitude":116.300949},"_distance":0,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"14421127661530616279","_dir_desc":""},{"title":"\xe4\xb8\x87\xe6\xb3\x89\xe6\xb2\xb3\xe5\xb0\x8f\xe5\xad\xa6","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba","location":{"__type":"GeoPoint","latitude":39.986057,"longitude":116.301041},"_distance":8.9,"type":{"mapping_type":"primary_school","origin_type":"\xe5\xb0\x8f\xe5\xad\xa6"},"id":"12707953666834487254","_dir_desc":"\xe6\x97\x81"},{"title":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c\xe5\x8d\x97\xe8\xa1\x976\xe5\x8f\xb7\xe9\x99\xa2","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba","location":{"__type":"GeoPoint","latitude":39.986141,"longitude":116.301941},"_distance":86.1,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"2268373203482337631","_dir_desc":"\xe8\xa5\xbf\xe5\x8d\x97"},{"title":"\xe6\xb5\xb7\xe6\xb7\x80\xe6\xa1\xa5\xe8\xa5\xbf\xe5\x85\xac\xe4\xba\xa4\xe7\xab\x99","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba\xe6\xb5\xb7\xe6\xb7\x80\xe6\xa1\xa5\xe8\xa5\xbf\xe5\x85\xac\xe4\xba\xa4\xe7\xab\x99","location":{"__type":"GeoPoint","latitude":39.985439,"longitude":116.301636},"_distance":87.2,"type":{"mapping_type":"bus_route","origin_type":"\xe6\x99\xae\xe9\x80\x9a\xe5\x85\xac\xe4\xba\xa4\xe7\xba\xbf\xe8\xb7\xaf"},"id":"8400100000000003244475","_dir_desc":"\xe8\xa5\xbf\xe5\x8c\x97"},{"title":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe5\x85\xab\xe4\xb8\x80\xe4\xb8\xad\xe5\xad\xa6(\xe5\x8c\x97\xe6\xa0\xa1\xe5\x8c\xba)","address":"\xe8\x8d\x89\xe5\x9c\xba\xe4\xb9\x9973\xe5\x8f\xb7","location":{"__type":"GeoPoint","latitude":39.986858,"longitude":116.301125},"_distance":94.6,"type":{"mapping_type":"high_school","origin_type":"\xe4\xb8\xad\xe5\xad\xa6"},"id":"12301300297552707786","_dir_desc":"\xe8\xa5\xbf\xe5\x8d\x97"},{"title":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c\xe5\xb0\x8f\xe5\x8c\xba(\xe5\x8d\x97\xe9\x97\xa8)","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba\xe9\xa2\x90\xe5\x92\x8c\xe5\x9b\xad\xe8\xb7\xaf12\xe5\x8f\xb7\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c\xe5\xb0\x8f\xe5\x8c\xba","location":{"__type":"GeoPoint","latitude":39.986969,"longitude":116.301147},"_distance":107.1,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"9002147761414616622","_dir_desc":"\xe9\x99\x84\xe8\xbf\x91"},{"title":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c 9 \xe5\x8f\xb7","address":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c\xe5\x86\x85","location":{"__type":"GeoPoint","latitude":39.987167,"longitude":116.300835},"_distance":128.7,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"11407561976629851409","_dir_desc":"\xe4\xb8\x9c\xe5\x8d\x97"},{"title":"\xe7\x99\xbe\xe7\x8e\xaf\xe7\xa1\x85\xe8\xb0\xb7\xe9\xa6\x99\xe6\x9e\x97","address":"\xe8\x8a\x99\xe8\x93\x89\xe9\x87\x8c\xe5\x8d\x97\xe8\xa1\x976\xe5\x8f\xb7","location":{"__type":"GeoPoint","latitude":39.986771,"longitude":116.302162},"_distance":133.1,"type":{"mapping_type":"residence","origin_type":"\xe4\xbd\x8f\xe5\xae\x85\xe5\xb0\x8f\xe5\x8c\xba"},"id":"15929706395430496698","_dir_desc":"\xe9\x99\x84\xe8\xbf\x91"},{"title":"\xe6\xb5\xb7\xe6\xb7\x80\xe5\x85\xac\xe5\x9b\xad","address":"\xe4\xb8\x87\xe6\xb3\x89\xe6\xb2\xb3\xe6\xa1\xa5\xe8\xa5\xbf\xe5\x8c\x97","location":{"__type":"GeoPoint","latitude":39.986408,"longitude":116.299393},"_distance":139.6,"type":{"mapping_type":"park","origin_type":"\xe5\x85\xac\xe5\x9b\xad"},"id":"10442235389874620207","_dir_desc":"\xe4\xb8\x9c"}],"radius":65,"location":{"__type":"GeoPoint","latitude":39.9921752,"longitude":116.3074105},"address":{"province":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82","city":"\xe5\x8c\x97\xe4\xba\xac\xe5\xb8\x82","district":"\xe6\xb5\xb7\xe6\xb7\x80\xe5\x8c\xba","street_number":"","nation":"\xe4\xb8\xad\xe5\x9b\xbd","street":"\xe4\xb8\x87\xe6\xb3\x89\xe6\xb2\xb3\xe6\xa1\xa5"}},"location":{"lat":39.9921752,"lng":116.3074105},"createdAt":"2015-11-02T15:44:02.002Z","updatedAt":"2015-11-02T15:44:02.002Z","id":"563784c1aa71532446d008b0","source":"","type":"location"}'}
b = '{"a":"{'b':1}"}'
import json
m = json.loads(b)
#x = json.loads(m["a"])
#print x
#print json.loads(a.values()[0])["type"]

# from pymongo import MongoClient
#
# client = MongoClient("mongodb://root:Senz2everyone@119.254.111.40:27017")
# db = client.RefinedLog
#
# print db.UserLocation.find_one({"userRawdataId":'1000223'})
# print "fuck"
# assert db.UserLocation.find_one({"userRawdataId":1}) == None



# ## read json file
# json_file = "/Users/zhanghengyang/Log日志_2015_11_10/Log.json"
# log_chunk = json.load(open(json_file, "rb"))
# #print len(log_chunk)
# print "fuck"

import requests

url = "http://127.0.0.1:9010/locationprob/"
data = json.dumps({ "user_trace": [{ "timestamp": 1447745708586,
                                     "location": {"latitude": 39.9804621, "__type": "GeoPoint", "longitude": 116.3091294 } } ],
                    "dev_key": "senz", "userId": "55f788f4ddb25bb7713125ef" })
res = requests.post(url, data=data)

print json.loads(res.content)["code"]